# OSI 7 계층

: **네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것**

**물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층**

→ 계층 모델에 의해 **프로토콜도 계층별로 구성**

이유 : **통신이 일어나는 과정을 단계별로 알 수 있고, 7단계 중 특정한 곳에 이상이 생기면 다른 단계와 독립적으로 그 단계만 수정할 수 있기 때문**

- 프로토콜이란

: 메세지를 주고 받는 양식이나 규칙을 의미하는 **통신 규약**

## OSI 7 계층의 구조

- [7] 응용 계층(Application Layer)
    
    데이터 단위 : message
    
    프로토콜 : HTTP, SMTP, FTP, SIP 등
    
    - 통신의 최종 목적지, 응용 프로그램들이 통신으로 활용하는 계층
    - 사용자에게 가장 가까운 계층이고 웹 브라우저, 응용 프로그램을 통해 사용자와 직접적으로 상호작용
    - 많은 프로토콜이 존재하고 새로운 프로토콜 추가도 굉장히 쉬움
- [6] 표현 계층(Presentation Layer)
    
    데이터 단위 : message
    
    프로토콜 : ASCII, MPEG 등
    
    - 데이터의 암호화, 복호화와 같이 응용 계층에서 교환되는 데이터의 의미를 해석하는 계층
    - 응용 프로그램 ↔ 네트워크 간 정해진 형식대로 데이터를 변환, 즉 표현함
    - 인터넷의 계층 구조에는 포함되지 않고 필요에 따라 응용 계층에서 지원하거나 어플리케이션 개발자가 직접 개발해야 함
- [5] 세션 계층(Session Layer)
    
    데이터 단위 : message
    
    프로토콜 : NetBIOS, TLS 등
    
    - 데이터 교환의 경계와 동기화를 제공하는 계층
    - 세션 계층의 프로토콜은 연결이 손실되는 경우 연결 복구를 시도함 오랜시간 연결되지 않으면 세션 계층의 프로토콜이 연결을 닫고 다시 연결을 재개함
    - 데이터를 상대방이 보내고 있을 때 동시에 보낼 지에 대한 전이동(동시에 보냄, 전화기), 반이중(동시에 보내지 않음, 무전기) 통신 결정 가능
- [4] 전송 계층(Transport Layer)
    
    데이터 단위 : segment
    
    프로토콜 : TCP, UDP, SCTP 등
    
    - 상위 계층의 메시지를 하위계층으로 전송하는 계층
    - 메세지의 오류를 제어
        
        메시지가 클 경우 이를 나눠서(Segmentation) 네트워크 계층으로 전달 → 받은 패킷을 재조립하여 상위 계층으로 전달
        
    - 대표적으로 TCP, UDP 프로토콜 존재
        
        TCP → 연결 지향형 통신
        
        UDP → 비연결형 통신
        
- [3] 네트워크 계층(Network Layer)
    
    데이터 단위 : datagram, packet
    
    프로토콜 : IP, ICMP, ARP, RIP, BGP 등
    
    - 패킷을 한 호스트에서 다른 호스트로 라우팅하는 계층(여러 라우터를 통한 라우팅, 그를 통한 패킷 전달)
    - 전송 계층에게 전달 받은 목적지 주소를 이용해서 패킷을 만들고 그 목적지의 전송 계층으로 패킷을 전달
    - 인터넷의 경우 IP 프로토콜이 대표적
- [2] 데이터 링크 계층 (Data Link Layer)
    
    데이터 단위 : frame
    
    프로토콜 : PPP, Ethernet, Token ring, IEE 802.11(Wifi) 등
    
    - 데이터를 frame 단위로 한 네트워크 요소에서 이웃 네트워크로 전송하는 계층 (물리 계층을 이용하여 전송)
    - 인터넷의 경우 Ethernet 프로토콜이 대표적 → MAC 주소를 이용해 Node-to-Node, Point-to-Point로 프레임을 전송
    - 이 계층의 장비로 대표적인 것은 스위치, 브릿지
- [1] 물리 계층(Physical Layer)
    
    데이터 단위 : bit
    
    프로토콜 : DSL, ISDN 등
    
    - 장치 간 전기적 신호를 전달하는 계층, 데이터 프레임 내부의 각 bit를 한 노드에서 다음 노드로 실제로 이동시키는 계층
    - 인터넷의 Ethernet 또한 여러가지 물리 계층 프로토콜을 갖고 있음
    - 이 계층의 장비로 대표적인 것은 허브, 리피터임

### TCP 3-way handshake & 4-way-handshake

→ 이거 두개 이해 잘 안됨

TCP의 **3-way-handshake →** TCP 통신을 시작하기 전에 논리적인 경로 **연결을 수립 (Connection Establish)** 하는 과정 

**4-way-handshake →** 논리적인 경로 **연결을 해제 (Connection Termination)** 하는 과정

- **TCP 3-way-handshake : Connection Establish**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/26d0c686-5ffb-4ea3-89b3-c94dbd17dd4f/80379409-3bca-4f7a-beba-09f91b7f7bcb/image.png)

→ 과정을 통해 양쪽 모두 데이터를 전송할 준비가 되었다는 것을 보장함

최종 PORT 상태 : A-ESTABLISHED, B-ESTABLISHED (연결 수립)

- **TCP 4-way-handshake : Connection Termination**

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/26d0c686-5ffb-4ea3-89b3-c94dbd17dd4f/9a63d10f-b93b-48aa-99c4-e1e83450fc93/image.png)

→ **A 프로세스(Client)가 B 프로세스(Server)에 연결 해제를 요청**

최종 PORT 상태 : A-CLOSED, B-CLOSED (연결 해제)
